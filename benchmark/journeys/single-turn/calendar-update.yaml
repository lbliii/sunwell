# Journey: Update calendar (external integration)
# Tests: TASK intent detection for external service requests
# Note: Without actual calendar integration, this tests intent routing and clarification
journey:
  id: "journey-calendar-update"
  type: "single_turn"
  description: "Test intent detection for external service integration requests"
  tags:
    - intent
    - external
    - clarification

  setup:
    workspace: "/tmp/sunwell-test-{uuid}"

  input: "add a meeting to my calendar tomorrow at 3pm"

  expect:
    # Should detect as TASK (action request)
    intent: TASK

    signals:
      needs_tools: "YES"

    # Without calendar integration, expect clarification or explanation
    # that it can't access calendar
    output_contains:
      - "calendar"

    # Should NOT try to write random files
    tools_not_called:
      - write_file

  timeout_seconds: 60
  allow_flaky_retry: 0
