# Code Review Task: Performance issues
task:
  id: "review-perf-001"
  category: "code_review"
  subcategory: "performance"
  
  prompt: |
    Review this code for performance issues:
    
    ```python
    def find_duplicates(items: list[str]) -> list[str]:
        duplicates = []
        for i in range(len(items)):
            for j in range(i + 1, len(items)):
                if items[i] == items[j] and items[i] not in duplicates:
                    duplicates.append(items[i])
        return duplicates
    
    def count_words(text: str) -> dict[str, int]:
        words = text.lower().split()
        counts = {}
        for word in words:
            if word in counts.keys():
                counts[word] = counts[word] + 1
            else:
                counts[word] = 1
        return counts
    
    def process_large_file(filepath: str) -> list[str]:
        with open(filepath) as f:
            content = f.read()
        
        lines = content.split('\n')
        result = []
        for line in lines:
            if 'ERROR' in line:
                result = result + [line]
        return result
    ```
    
    Identify performance issues and provide optimized solutions.
  
  lens: "code-reviewer.lens"
  
  evaluation:
    rubric:
      - dimension: "issue_identification"
        weight: 0.35
        criteria: "Identifies O(n²) complexity, memory issues, inefficient patterns"
      - dimension: "actionability"
        weight: 0.35
        criteria: "Provides optimized implementations"
      - dimension: "explanation_quality"
        weight: 0.2
        criteria: "Explains time/space complexity improvements"
      - dimension: "accuracy"
        weight: 0.1
        criteria: "Optimizations are correct and improve performance"
    
    must_contain:
      - "O(n"
      - "set"
      - "Counter"
    
    ground_truth_issues:
      - "O(n²) duplicate detection"
      - "Unnecessary .keys() call"
      - "String concatenation in loop"
      - "Loading entire file into memory"
