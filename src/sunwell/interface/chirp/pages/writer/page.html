{% block title %}Writer - Sunwell Studio{% end %}

{% block content %}
{% import "empty.html" as ui %}
{% import "card.html" as ui_card %}
{% import "status.html" as ui_status %}

<div class="writer-container">
    <header class="page-header mb-lg">
        <div class="header-content">
            <h1><span class="icon-gold">※</span> Writer</h1>
            <p class="text-muted">Document editing with AI assistance</p>
        </div>
        <button class="btn btn-primary"
                hx-get="/writer/new-form"
                hx-target="#modal-container"
                hx-swap="innerHTML">
            + New Document
        </button>
    </header>

    {% if documents %}
        <div class="documents-grid grid grid-2">
            {% for doc in documents %}
                {% call ui_card.card() %}
                    <h3>{{ doc.title }}</h3>
                    <p class="text-muted"><code>{{ doc.path }}</code></p>
                    <div class="document-meta">
                        {% call ui_status.badge(doc.status) %}{{ doc.status }}{% end %}
                        <span class="text-muted">{{ doc.modified | relative_time }}</span>
                    </div>
                    <div class="document-actions">
                        <button class="btn btn-sm" disabled>Edit (Coming Soon)</button>
                        <button class="btn btn-sm btn-ghost" disabled>Validate (Coming Soon)</button>
                    </div>
                {% end %}
            {% end %}
        </div>
    {% else %}
        {% call ui.empty_state("※", "No Documents") %}
            <p class="text-muted">Create or import documents to start writing</p>
        {% end %}
    {% end %}
</div>

{# Modal container for new document form #}
<div id="modal-container"></div>
{% end %}

{% block head %}
<style>
.document-card {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.document-card h3 {
    margin: 0;
    font-size: 1.125rem;
}

.document-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: var(--space-sm);
    padding-top: var(--space-sm);
    border-top: 1px solid var(--color-border);
    font-size: 0.875rem;
}

.status-badge {
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: capitalize;
}

.status-draft {
    background: rgba(79, 70, 229, 0.15);
    color: var(--color-void-indigo);
}

.status-published {
    background: rgba(34, 197, 94, 0.15);
    color: var(--color-success);
}

.document-actions {
    display: flex;
    gap: var(--space-sm);
    margin-top: auto;
}
</style>
{% end %}
