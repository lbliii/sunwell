{
  "$schema": "http://json-schema.org/draft-2020-12/schema",
  "$id": "https://sunwell.ai/schemas/agent-events.json",
  "title": "Sunwell Agent Events",
  "description": "Schema for NDJSON events emitted by Sunwell CLI",
  "type": "object",
  "oneOf": [
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "session_start",
          "description": "Event type: session_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "session_id": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "session_ready",
          "description": "Event type: session_ready"
        },
        "data": {
          "type": "object",
          "properties": {
            "session_id": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "session_end",
          "description": "Event type: session_end"
        },
        "data": {
          "type": "object",
          "properties": {
            "session_id": {
              "type": "string"
            },
            "duration_s": {
              "type": "number"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "session_crash",
          "description": "Event type: session_crash"
        },
        "data": {
          "type": "object",
          "properties": {
            "session_id": {
              "type": "string"
            },
            "error": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "goal_received",
          "description": "Event type: goal_received"
        },
        "data": {
          "type": "object",
          "properties": {
            "goal": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "goal_analyzing",
          "description": "Event type: goal_analyzing"
        },
        "data": {
          "type": "object",
          "properties": {
            "goal": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "goal_ready",
          "description": "Event type: goal_ready"
        },
        "data": {
          "type": "object",
          "properties": {
            "goal": {
              "type": "string"
            },
            "tasks": {
              "type": "integer"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "goal_complete",
          "description": "Event type: goal_complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "goal": {
              "type": "string"
            },
            "tasks_completed": {
              "type": "integer"
            },
            "duration_s": {
              "type": "number"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "goal_failed",
          "description": "Event type: goal_failed"
        },
        "data": {
          "type": "object",
          "properties": {
            "goal": {
              "type": "string"
            },
            "error": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "goal_paused",
          "description": "Event type: goal_paused"
        },
        "data": {
          "type": "object",
          "properties": {
            "goal": {
              "type": "string"
            },
            "checkpoint": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "memory_load",
          "description": "Event type: memory_load"
        },
        "data": {
          "type": "object",
          "properties": {
            "session_id": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "memory_loaded",
          "description": "Event type: memory_loaded"
        },
        "data": {
          "type": "object",
          "properties": {
            "session_id": {
              "type": "string"
            },
            "fact_count": {
              "type": "integer"
            },
            "dead_end_count": {
              "type": "integer"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "memory_new",
          "description": "Event type: memory_new"
        },
        "data": {
          "type": "object",
          "properties": {
            "session_id": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "memory_learning",
          "description": "Event type: memory_learning"
        },
        "data": {
          "type": "object",
          "properties": {
            "fact": {
              "type": "string"
            },
            "category": {
              "type": "string"
            }
          },
          "required": [
            "category",
            "fact"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "memory_dead_end",
          "description": "Event type: memory_dead_end"
        },
        "data": {
          "type": "object",
          "properties": {
            "approach": {
              "type": "string"
            },
            "reason": {
              "type": "string"
            }
          },
          "required": [
            "approach"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "memory_checkpoint",
          "description": "Event type: memory_checkpoint"
        },
        "data": {
          "type": "object",
          "properties": {
            "session_id": {
              "type": "string"
            },
            "fact_count": {
              "type": "integer"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "memory_saved",
          "description": "Event type: memory_saved"
        },
        "data": {
          "type": "object",
          "properties": {
            "session_id": {
              "type": "string"
            },
            "fact_count": {
              "type": "integer"
            },
            "dead_end_count": {
              "type": "integer"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "orient",
          "description": "Event type: orient"
        },
        "data": {
          "type": "object",
          "properties": {
            "learnings": {
              "type": "integer"
            },
            "constraints": {
              "type": "integer"
            },
            "dead_ends": {
              "type": "integer"
            }
          },
          "required": [
            "learnings",
            "dead_ends",
            "constraints"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "learning_added",
          "description": "Event type: learning_added"
        },
        "data": {
          "type": "object",
          "properties": {
            "fact": {
              "type": "string"
            },
            "category": {
              "type": "string"
            },
            "confidence": {
              "type": "number"
            }
          },
          "required": [
            "category",
            "fact"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "decision_made",
          "description": "Event type: decision_made"
        },
        "data": {
          "type": "object",
          "properties": {
            "category": {
              "type": "string"
            },
            "question": {
              "type": "string"
            },
            "choice": {
              "type": "string"
            },
            "rejected_count": {
              "type": "integer"
            }
          },
          "required": [
            "question",
            "category",
            "choice"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "failure_recorded",
          "description": "Event type: failure_recorded"
        },
        "data": {
          "type": "object",
          "properties": {
            "description": {
              "type": "string"
            },
            "error_type": {
              "type": "string"
            },
            "context": {
              "type": "string"
            }
          },
          "required": [
            "error_type",
            "description",
            "context"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "briefing_updated",
          "description": "Event type: briefing_updated"
        },
        "data": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string"
            },
            "next_action": {
              "type": "string"
            },
            "hot_files": {
              "type": "array",
              "items": {}
            }
          },
          "required": [
            "status"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "knowledge_retrieved",
          "description": "Event type: knowledge_retrieved"
        },
        "data": {
          "type": "object",
          "properties": {
            "query": {
              "type": "string"
            },
            "results_count": {
              "type": "integer"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "template_matched",
          "description": "Event type: template_matched"
        },
        "data": {
          "type": "object",
          "properties": {
            "template_id": {
              "type": "string"
            },
            "confidence": {
              "type": "number"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "signal",
          "description": "Event type: signal"
        },
        "data": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string"
            },
            "signals": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "required": [
            "status"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "signal_route",
          "description": "Event type: signal_route"
        },
        "data": {
          "type": "object",
          "properties": {
            "route": {
              "type": "string"
            },
            "complexity": {
              "type": "string"
            },
            "reasoning": {
              "type": "string"
            },
            "confidence": {
              "type": "number"
            },
            "strategy": {
              "type": "string"
            },
            "threshold_vortex": {
              "type": "number"
            },
            "threshold_interference": {
              "type": "number"
            },
            "thresholds_adaptive": {
              "type": "boolean"
            }
          },
          "required": [
            "route"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "plan_start",
          "description": "Event type: plan_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "goal": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "plan_candidate",
          "description": "Event type: plan_candidate"
        },
        "data": {
          "type": "object",
          "properties": {
            "candidate_id": {
              "type": "string"
            },
            "artifact_count": {
              "type": "integer"
            },
            "description": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "plan_winner",
          "description": "Event type: plan_winner"
        },
        "data": {
          "type": "object",
          "properties": {
            "tasks": {
              "type": "integer"
            },
            "artifact_count": {
              "type": "integer"
            },
            "gates": {
              "type": "integer"
            },
            "technique": {
              "type": "string"
            },
            "selected_candidate_id": {
              "type": "string"
            },
            "total_candidates": {
              "type": "integer"
            },
            "metrics": {
              "type": "object",
              "additionalProperties": true
            },
            "selection_reason": {
              "type": "string"
            },
            "variance_strategy": {
              "type": "string"
            },
            "variance_config": {
              "type": "object",
              "additionalProperties": true
            },
            "refinement_rounds": {
              "type": "integer"
            },
            "final_score_improvement": {
              "type": "number"
            },
            "score": {
              "type": "number"
            },
            "task_list": {
              "type": "object",
              "additionalProperties": true
            },
            "gate_list": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "required": [
            "selected_candidate_id",
            "tasks"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "plan_expanded",
          "description": "Event type: plan_expanded"
        },
        "data": {
          "type": "object",
          "properties": {
            "new_tasks": {
              "type": "integer"
            },
            "total_tasks": {
              "type": "integer"
            },
            "reason": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "plan_assess",
          "description": "Event type: plan_assess"
        },
        "data": {
          "type": "object",
          "properties": {
            "complete": {
              "type": "boolean"
            },
            "remaining_tasks": {
              "type": "integer"
            },
            "assessment": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "plan_candidate_start",
          "description": "Event type: plan_candidate_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "total_candidates": {
              "type": "integer"
            },
            "variance_strategy": {
              "type": "string"
            }
          },
          "required": [
            "total_candidates"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "plan_candidate_generated",
          "description": "Event type: plan_candidate_generated"
        },
        "data": {
          "type": "object",
          "properties": {
            "candidate_id": {
              "type": "string"
            },
            "artifact_count": {
              "type": "integer"
            },
            "progress": {
              "type": "integer"
            },
            "total_candidates": {
              "type": "integer"
            },
            "variance_config": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "required": [
            "artifact_count",
            "candidate_id",
            "total_candidates"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "plan_candidates_complete",
          "description": "Event type: plan_candidates_complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "total_candidates": {
              "type": "integer"
            },
            "total_artifacts": {
              "type": "integer"
            },
            "successful_candidates": {
              "type": "integer"
            },
            "failed_candidates": {
              "type": "integer"
            }
          },
          "required": [
            "total_candidates"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "plan_candidate_scored",
          "description": "Event type: plan_candidate_scored"
        },
        "data": {
          "type": "object",
          "properties": {
            "candidate_id": {
              "type": "string"
            },
            "score": {
              "type": "number"
            },
            "progress": {
              "type": "integer"
            },
            "total_candidates": {
              "type": "integer"
            },
            "metrics": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "required": [
            "candidate_id",
            "score",
            "total_candidates"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "plan_scoring_complete",
          "description": "Event type: plan_scoring_complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "total_scored": {
              "type": "integer"
            }
          },
          "required": [
            "total_scored"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "plan_refine_start",
          "description": "Event type: plan_refine_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "round": {
              "type": "integer"
            },
            "total_rounds": {
              "type": "integer"
            },
            "current_score": {
              "type": "number"
            },
            "improvements_identified": {
              "type": "array",
              "items": {}
            }
          },
          "required": [
            "round",
            "total_rounds"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "plan_refine_attempt",
          "description": "Event type: plan_refine_attempt"
        },
        "data": {
          "type": "object",
          "properties": {
            "round": {
              "type": "integer"
            },
            "improvements_applied": {
              "type": "array",
              "items": {}
            },
            "new_score": {
              "type": "number"
            }
          },
          "required": [
            "round"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "plan_refine_complete",
          "description": "Event type: plan_refine_complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "round": {
              "type": "integer"
            },
            "improved": {
              "type": "boolean"
            },
            "old_score": {
              "type": "number"
            },
            "new_score": {
              "type": "number"
            },
            "improvement": {
              "type": "number"
            },
            "reason": {
              "type": "string"
            },
            "improvements_applied": {
              "type": "array",
              "items": {}
            }
          },
          "required": [
            "round"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "plan_refine_final",
          "description": "Event type: plan_refine_final"
        },
        "data": {
          "type": "object",
          "properties": {
            "total_rounds": {
              "type": "integer"
            },
            "final_score": {
              "type": "number"
            },
            "total_improvements": {
              "type": "integer"
            }
          },
          "required": [
            "total_rounds"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "plan_discovery_progress",
          "description": "Event type: plan_discovery_progress"
        },
        "data": {
          "type": "object",
          "properties": {
            "artifacts_discovered": {
              "type": "integer"
            },
            "phase": {
              "type": "string"
            },
            "total_estimated": {
              "type": "integer"
            },
            "current_artifact": {
              "type": "string"
            }
          },
          "required": [
            "artifacts_discovered",
            "phase"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "gate_start",
          "description": "Event type: gate_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "gate_id": {
              "type": "string"
            },
            "gate_type": {
              "type": "string"
            }
          },
          "required": [
            "gate_type",
            "gate_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "gate_step",
          "description": "Event type: gate_step"
        },
        "data": {
          "type": "object",
          "properties": {
            "gate_id": {
              "type": "string"
            },
            "step": {
              "type": "string"
            },
            "passed": {
              "type": "boolean"
            },
            "message": {
              "type": "string"
            }
          },
          "required": [
            "step",
            "passed",
            "gate_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "gate_pass",
          "description": "Event type: gate_pass"
        },
        "data": {
          "type": "object",
          "properties": {
            "gate_id": {
              "type": "string"
            },
            "gate_type": {
              "type": "string"
            }
          },
          "required": [
            "gate_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "gate_fail",
          "description": "Event type: gate_fail"
        },
        "data": {
          "type": "object",
          "properties": {
            "gate_id": {
              "type": "string"
            },
            "gate_type": {
              "type": "string"
            },
            "failed_step": {
              "type": "string"
            },
            "errors": {
              "type": "array",
              "items": {}
            }
          },
          "required": [
            "gate_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "task_start",
          "description": "Event type: task_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string"
            },
            "artifact_id": {
              "type": "string"
            },
            "description": {
              "type": "string"
            }
          },
          "required": [
            "task_id",
            "description"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "task_progress",
          "description": "Event type: task_progress"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string"
            },
            "artifact_id": {
              "type": "string"
            },
            "progress": {
              "type": "integer"
            },
            "message": {
              "type": "string"
            }
          },
          "required": [
            "task_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "task_complete",
          "description": "Event type: task_complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string"
            },
            "artifact_id": {
              "type": "string"
            },
            "duration_ms": {
              "type": "integer"
            },
            "file": {
              "type": "string"
            }
          },
          "required": [
            "task_id",
            "duration_ms"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "task_output",
          "description": "Event type: task_output"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string"
            },
            "content": {
              "type": "string"
            }
          },
          "required": [
            "task_id",
            "content"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "task_failed",
          "description": "Event type: task_failed"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string"
            },
            "artifact_id": {
              "type": "string"
            },
            "error": {
              "type": "string"
            }
          },
          "required": [
            "task_id",
            "error"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "validate_start",
          "description": "Event type: validate_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "artifact_id": {
              "type": "string"
            },
            "validation_levels": {
              "type": "array",
              "items": {}
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "validate_level",
          "description": "Event type: validate_level"
        },
        "data": {
          "type": "object",
          "properties": {
            "level": {
              "type": "string"
            },
            "artifact_id": {
              "type": "string"
            },
            "passed": {
              "type": "boolean"
            }
          },
          "required": [
            "level"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "validate_error",
          "description": "Event type: validate_error"
        },
        "data": {
          "type": "object",
          "properties": {
            "error_type": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "file": {
              "type": "string"
            },
            "line": {
              "type": "integer"
            }
          },
          "required": [
            "error_type",
            "message"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "validate_pass",
          "description": "Event type: validate_pass"
        },
        "data": {
          "type": "object",
          "properties": {
            "level": {
              "type": "string"
            },
            "artifact_id": {
              "type": "string"
            }
          },
          "required": [
            "level"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "fix_start",
          "description": "Event type: fix_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "error_count": {
              "type": "integer"
            },
            "artifact_id": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "fix_progress",
          "description": "Event type: fix_progress"
        },
        "data": {
          "type": "object",
          "properties": {
            "stage": {
              "type": "string"
            },
            "progress": {
              "type": "number"
            },
            "detail": {
              "type": "string"
            }
          },
          "required": [
            "progress",
            "stage"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "fix_attempt",
          "description": "Event type: fix_attempt"
        },
        "data": {
          "type": "object",
          "properties": {
            "attempt": {
              "type": "integer"
            },
            "fix_type": {
              "type": "string"
            },
            "error_id": {
              "type": "string"
            }
          },
          "required": [
            "attempt"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "fix_complete",
          "description": "Event type: fix_complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "fixes_applied": {
              "type": "integer"
            },
            "errors_remaining": {
              "type": "integer"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "fix_failed",
          "description": "Event type: fix_failed"
        },
        "data": {
          "type": "object",
          "properties": {
            "attempt": {
              "type": "integer"
            },
            "reason": {
              "type": "string"
            },
            "error_id": {
              "type": "string"
            }
          },
          "required": [
            "attempt"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "complete",
          "description": "Event type: complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "tasks_completed": {
              "type": "integer"
            },
            "tasks_failed": {
              "type": "integer"
            },
            "gates_passed": {
              "type": "integer"
            },
            "duration_s": {
              "type": "number"
            },
            "learnings_count": {
              "type": "integer"
            },
            "completed": {
              "type": "integer"
            },
            "failed": {
              "type": "integer"
            }
          },
          "required": [
            "tasks_completed"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "error",
          "description": "Event type: error"
        },
        "data": {
          "type": "object",
          "properties": {
            "message": {
              "type": "string"
            },
            "phase": {
              "type": "string"
            },
            "context": {
              "type": "object",
              "additionalProperties": true
            },
            "error_type": {
              "type": "string"
            },
            "traceback": {
              "type": "string"
            }
          },
          "required": [
            "message"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "escalate",
          "description": "Event type: escalate"
        },
        "data": {
          "type": "object",
          "properties": {
            "reason": {
              "type": "string"
            },
            "action": {
              "type": "string"
            },
            "context": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "required": [
            "reason"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "recovery_saved",
          "description": "Event type: recovery_saved"
        },
        "data": {
          "type": "object",
          "properties": {
            "recovery_id": {
              "type": "string"
            },
            "artifact_ids": {
              "type": "array",
              "items": {}
            },
            "reason": {
              "type": "string"
            }
          },
          "required": [
            "artifact_ids",
            "recovery_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "recovery_loaded",
          "description": "Event type: recovery_loaded"
        },
        "data": {
          "type": "object",
          "properties": {
            "recovery_id": {
              "type": "string"
            },
            "artifact_ids": {
              "type": "array",
              "items": {}
            }
          },
          "required": [
            "artifact_ids",
            "recovery_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "recovery_resolved",
          "description": "Event type: recovery_resolved"
        },
        "data": {
          "type": "object",
          "properties": {
            "recovery_id": {
              "type": "string"
            },
            "artifacts_passed": {
              "type": "integer"
            }
          },
          "required": [
            "recovery_id",
            "artifacts_passed"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "recovery_aborted",
          "description": "Event type: recovery_aborted"
        },
        "data": {
          "type": "object",
          "properties": {
            "recovery_id": {
              "type": "string"
            },
            "reason": {
              "type": "string"
            }
          },
          "required": [
            "recovery_id",
            "reason"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "lens_selected",
          "description": "Event type: lens_selected"
        },
        "data": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "version": {
              "type": "string"
            },
            "source": {
              "type": "string"
            }
          },
          "required": [
            "name"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "lens_changed",
          "description": "Event type: lens_changed"
        },
        "data": {
          "type": "object",
          "properties": {
            "old_lens": {
              "type": "string"
            },
            "new_lens": {
              "type": "string"
            },
            "reason": {
              "type": "string"
            }
          },
          "required": [
            "new_lens"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "integration_check_start",
          "description": "Event type: integration_check_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "edge_id": {
              "type": "string"
            },
            "check_type": {
              "type": "string"
            },
            "source_artifact": {
              "type": "string"
            },
            "target_artifact": {
              "type": "string"
            }
          },
          "required": [
            "edge_id",
            "source_artifact",
            "check_type",
            "target_artifact"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "integration_check_pass",
          "description": "Event type: integration_check_pass"
        },
        "data": {
          "type": "object",
          "properties": {
            "edge_id": {
              "type": "string"
            },
            "check_type": {
              "type": "string"
            },
            "verification_method": {
              "type": "string"
            }
          },
          "required": [
            "verification_method",
            "edge_id",
            "check_type"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "integration_check_fail",
          "description": "Event type: integration_check_fail"
        },
        "data": {
          "type": "object",
          "properties": {
            "edge_id": {
              "type": "string"
            },
            "check_type": {
              "type": "string"
            },
            "expected": {
              "type": "string"
            },
            "actual": {
              "type": "string"
            },
            "suggested_fix": {
              "type": "string"
            }
          },
          "required": [
            "expected",
            "edge_id",
            "actual",
            "check_type"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "stub_detected",
          "description": "Event type: stub_detected"
        },
        "data": {
          "type": "object",
          "properties": {
            "artifact_id": {
              "type": "string"
            },
            "file_path": {
              "type": "string"
            },
            "stub_type": {
              "type": "string"
            },
            "location": {
              "type": "string"
            }
          },
          "required": [
            "artifact_id",
            "stub_type",
            "location",
            "file_path"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "orphan_detected",
          "description": "Event type: orphan_detected"
        },
        "data": {
          "type": "object",
          "properties": {
            "artifact_id": {
              "type": "string"
            },
            "file_path": {
              "type": "string"
            }
          },
          "required": [
            "artifact_id",
            "file_path"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "wire_task_generated",
          "description": "Event type: wire_task_generated"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string"
            },
            "source_artifact": {
              "type": "string"
            },
            "target_artifact": {
              "type": "string"
            },
            "integration_type": {
              "type": "string"
            }
          },
          "required": [
            "task_id",
            "source_artifact",
            "integration_type",
            "target_artifact"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "contract_verify_start",
          "description": "Event type: contract_verify_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string"
            },
            "protocol_name": {
              "type": "string"
            },
            "implementation_file": {
              "type": "string"
            },
            "contract_file": {
              "type": "string"
            }
          },
          "required": [
            "task_id",
            "contract_file",
            "implementation_file",
            "protocol_name"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "contract_verify_pass",
          "description": "Event type: contract_verify_pass"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string"
            },
            "protocol_name": {
              "type": "string"
            },
            "implementation_file": {
              "type": "string"
            },
            "final_tier": {
              "type": "string"
            },
            "tier_results": {
              "type": "array",
              "items": {}
            },
            "duration_ms": {
              "type": "integer"
            }
          },
          "required": [
            "task_id",
            "final_tier",
            "protocol_name"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "contract_verify_fail",
          "description": "Event type: contract_verify_fail"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string"
            },
            "protocol_name": {
              "type": "string"
            },
            "implementation_file": {
              "type": "string"
            },
            "final_tier": {
              "type": "string"
            },
            "tier_results": {
              "type": "array",
              "items": {}
            },
            "mismatches": {
              "type": "array",
              "items": {}
            },
            "error_message": {
              "type": "string"
            },
            "duration_ms": {
              "type": "integer"
            }
          },
          "required": [
            "task_id",
            "final_tier",
            "error_message",
            "protocol_name"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "briefing_loaded",
          "description": "Event type: briefing_loaded"
        },
        "data": {
          "type": "object",
          "properties": {
            "mission": {
              "type": "string"
            },
            "status": {
              "type": "string"
            },
            "has_hazards": {
              "type": "boolean"
            },
            "has_dispatch_hints": {
              "type": "boolean"
            }
          },
          "required": [
            "mission",
            "has_hazards",
            "status"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "briefing_saved",
          "description": "Event type: briefing_saved"
        },
        "data": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string"
            },
            "next_action": {
              "type": "string"
            },
            "tasks_completed": {
              "type": "integer"
            }
          },
          "required": [
            "status"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "prefetch_start",
          "description": "Event type: prefetch_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "briefing": {
              "type": "string"
            }
          },
          "required": [
            "briefing"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "prefetch_complete",
          "description": "Event type: prefetch_complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "files_loaded": {
              "type": "integer"
            },
            "learnings_loaded": {
              "type": "integer"
            },
            "skills_activated": {
              "type": "array",
              "items": {}
            }
          },
          "required": [
            "skills_activated",
            "learnings_loaded",
            "files_loaded"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "prefetch_timeout",
          "description": "Event type: prefetch_timeout"
        },
        "data": {
          "type": "object",
          "properties": {
            "error": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "lens_suggested",
          "description": "Event type: lens_suggested"
        },
        "data": {
          "type": "object",
          "properties": {
            "suggested": {
              "type": "string"
            },
            "reason": {
              "type": "string"
            }
          },
          "required": [
            "suggested",
            "reason"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "model_start",
          "description": "Event type: model_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string"
            },
            "model": {
              "type": "string"
            },
            "prompt_tokens": {
              "type": "integer"
            },
            "estimated_time_s": {
              "type": "number"
            }
          },
          "required": [
            "task_id",
            "model"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "model_tokens",
          "description": "Event type: model_tokens"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string"
            },
            "tokens": {
              "type": "string"
            },
            "token_count": {
              "type": "integer"
            },
            "tokens_per_second": {
              "type": "number"
            },
            "cumulative": {
              "type": "boolean"
            }
          },
          "required": [
            "task_id",
            "tokens",
            "token_count"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "model_thinking",
          "description": "Event type: model_thinking"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string"
            },
            "phase": {
              "type": "string"
            },
            "content": {
              "type": "string"
            },
            "is_complete": {
              "type": "boolean"
            }
          },
          "required": [
            "task_id",
            "content",
            "phase"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "model_complete",
          "description": "Event type: model_complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string"
            },
            "total_tokens": {
              "type": "integer"
            },
            "duration_s": {
              "type": "number"
            },
            "tokens_per_second": {
              "type": "number"
            },
            "time_to_first_token_ms": {
              "type": "integer"
            },
            "input_tokens": {
              "type": "integer"
            },
            "output_tokens": {
              "type": "integer"
            }
          },
          "required": [
            "task_id",
            "total_tokens",
            "duration_s",
            "tokens_per_second"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "model_heartbeat",
          "description": "Event type: model_heartbeat"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string"
            },
            "elapsed_s": {
              "type": "number"
            },
            "token_count": {
              "type": "integer"
            }
          },
          "required": [
            "task_id",
            "elapsed_s",
            "token_count"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "skill_graph_resolved",
          "description": "Event type: skill_graph_resolved"
        },
        "data": {
          "type": "object",
          "properties": {
            "lens_name": {
              "type": "string"
            },
            "skill_count": {
              "type": "integer"
            },
            "wave_count": {
              "type": "integer"
            },
            "content_hash": {
              "type": "string"
            }
          },
          "required": [
            "skill_count",
            "content_hash",
            "wave_count",
            "lens_name"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "skill_wave_start",
          "description": "Event type: skill_wave_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "wave_index": {
              "type": "integer"
            },
            "total_waves": {
              "type": "integer"
            },
            "skills": {
              "type": "array",
              "items": {}
            },
            "parallel": {
              "type": "boolean"
            }
          },
          "required": [
            "total_waves",
            "wave_index",
            "skills"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "skill_wave_complete",
          "description": "Event type: skill_wave_complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "wave_index": {
              "type": "integer"
            },
            "duration_ms": {
              "type": "integer"
            },
            "succeeded": {
              "type": "array",
              "items": {}
            },
            "failed": {
              "type": "array",
              "items": {}
            }
          },
          "required": [
            "failed",
            "succeeded",
            "duration_ms",
            "wave_index"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "skill_cache_hit",
          "description": "Event type: skill_cache_hit"
        },
        "data": {
          "type": "object",
          "properties": {
            "skill_name": {
              "type": "string"
            },
            "cache_key": {
              "type": "string"
            },
            "saved_ms": {
              "type": "integer"
            }
          },
          "required": [
            "skill_name",
            "saved_ms",
            "cache_key"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "skill_execute_start",
          "description": "Event type: skill_execute_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "skill_name": {
              "type": "string"
            },
            "wave_index": {
              "type": "integer"
            },
            "requires": {
              "type": "array",
              "items": {}
            },
            "context_keys_available": {
              "type": "array",
              "items": {}
            },
            "risk_level": {
              "type": "string"
            },
            "has_permissions": {
              "type": "boolean"
            }
          },
          "required": [
            "requires",
            "skill_name",
            "context_keys_available",
            "wave_index"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "skill_execute_complete",
          "description": "Event type: skill_execute_complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "skill_name": {
              "type": "string"
            },
            "duration_ms": {
              "type": "integer"
            },
            "produces": {
              "type": "array",
              "items": {}
            },
            "cached": {
              "type": "boolean"
            },
            "success": {
              "type": "boolean"
            },
            "error": {
              "type": "string"
            },
            "risk_level": {
              "type": "string"
            },
            "violations_detected": {
              "type": "integer"
            }
          },
          "required": [
            "cached",
            "produces",
            "success",
            "duration_ms",
            "skill_name"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "skill_compile_start",
          "description": "Event type: skill_compile_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "lens_name": {
              "type": "string"
            },
            "skill_count": {
              "type": "integer"
            },
            "target_skills": {
              "type": "array",
              "items": {}
            }
          },
          "required": [
            "lens_name"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "skill_compile_complete",
          "description": "Event type: skill_compile_complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "lens_name": {
              "type": "string"
            },
            "task_count": {
              "type": "integer"
            },
            "wave_count": {
              "type": "integer"
            },
            "duration_ms": {
              "type": "integer"
            },
            "cached": {
              "type": "boolean"
            }
          },
          "required": [
            "duration_ms",
            "task_count",
            "wave_count",
            "lens_name"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "skill_compile_cache_hit",
          "description": "Event type: skill_compile_cache_hit"
        },
        "data": {
          "type": "object",
          "properties": {
            "cache_key": {
              "type": "string"
            },
            "task_count": {
              "type": "integer"
            },
            "wave_count": {
              "type": "integer"
            }
          },
          "required": [
            "wave_count",
            "task_count",
            "cache_key"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "skill_subgraph_extracted",
          "description": "Event type: skill_subgraph_extracted"
        },
        "data": {
          "type": "object",
          "properties": {
            "target_skills": {
              "type": "array",
              "items": {}
            },
            "total_skills": {
              "type": "integer"
            },
            "extracted_skills": {
              "type": "integer"
            }
          },
          "required": [
            "extracted_skills",
            "target_skills",
            "total_skills"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "security_approval_requested",
          "description": "Event type: security_approval_requested"
        },
        "data": {
          "type": "object",
          "properties": {
            "dag_id": {
              "type": "string"
            },
            "dag_name": {
              "type": "string"
            },
            "skill_count": {
              "type": "integer"
            },
            "risk_level": {
              "type": "string"
            },
            "risk_score": {
              "type": "number"
            },
            "flags": {
              "type": "array",
              "items": {}
            },
            "permissions": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "required": [
            "risk_level",
            "dag_id",
            "flags",
            "skill_count",
            "dag_name",
            "risk_score"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "security_approval_received",
          "description": "Event type: security_approval_received"
        },
        "data": {
          "type": "object",
          "properties": {
            "dag_id": {
              "type": "string"
            },
            "approved": {
              "type": "boolean"
            },
            "modified": {
              "type": "boolean"
            },
            "remembered": {
              "type": "boolean"
            }
          },
          "required": [
            "approved",
            "dag_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "security_violation",
          "description": "Event type: security_violation"
        },
        "data": {
          "type": "object",
          "properties": {
            "skill_name": {
              "type": "string"
            },
            "violation_type": {
              "type": "string"
            },
            "evidence": {
              "type": "string"
            },
            "detection_method": {
              "type": "string"
            },
            "action_taken": {
              "type": "string"
            },
            "position": {
              "type": "integer"
            }
          },
          "required": [
            "violation_type",
            "detection_method",
            "evidence",
            "skill_name",
            "action_taken"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "security_scan_complete",
          "description": "Event type: security_scan_complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "output_length": {
              "type": "integer"
            },
            "violations_found": {
              "type": "integer"
            },
            "scan_duration_ms": {
              "type": "integer"
            },
            "method": {
              "type": "string"
            }
          },
          "required": [
            "output_length",
            "violations_found",
            "scan_duration_ms",
            "method"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "audit_log_entry",
          "description": "Event type: audit_log_entry"
        },
        "data": {
          "type": "object",
          "properties": {
            "skill_name": {
              "type": "string"
            },
            "action": {
              "type": "string"
            },
            "risk_level": {
              "type": "string"
            },
            "details": {
              "type": "string"
            },
            "dag_id": {
              "type": "string"
            }
          },
          "required": [
            "action",
            "skill_name",
            "risk_level"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "backlog_goal_added",
          "description": "Event type: backlog_goal_added"
        },
        "data": {
          "type": "object",
          "properties": {
            "goal_id": {
              "type": "string"
            },
            "title": {
              "type": "string"
            }
          },
          "required": [
            "title",
            "goal_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "backlog_goal_started",
          "description": "Event type: backlog_goal_started"
        },
        "data": {
          "type": "object",
          "properties": {
            "goal_id": {
              "type": "string"
            }
          },
          "required": [
            "goal_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "backlog_goal_completed",
          "description": "Event type: backlog_goal_completed"
        },
        "data": {
          "type": "object",
          "properties": {
            "goal_id": {
              "type": "string"
            }
          },
          "required": [
            "goal_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "backlog_goal_failed",
          "description": "Event type: backlog_goal_failed"
        },
        "data": {
          "type": "object",
          "properties": {
            "goal_id": {
              "type": "string"
            },
            "error": {
              "type": "string"
            }
          },
          "required": [
            "error",
            "goal_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "backlog_refreshed",
          "description": "Event type: backlog_refreshed"
        },
        "data": {
          "type": "object",
          "properties": {
            "goal_count": {
              "type": "integer"
            }
          },
          "required": [
            "goal_count"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "tool_start",
          "description": "Event type: tool_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "tool_name": {
              "type": "string"
            },
            "tool_call_id": {
              "type": "string"
            },
            "arguments": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "required": [
            "tool_name",
            "tool_call_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "tool_complete",
          "description": "Event type: tool_complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "tool_name": {
              "type": "string"
            },
            "tool_call_id": {
              "type": "string"
            },
            "success": {
              "type": "boolean"
            },
            "output": {
              "type": "string"
            },
            "execution_time_ms": {
              "type": "integer"
            }
          },
          "required": [
            "output",
            "tool_name",
            "success",
            "tool_call_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "tool_error",
          "description": "Event type: tool_error"
        },
        "data": {
          "type": "object",
          "properties": {
            "tool_name": {
              "type": "string"
            },
            "tool_call_id": {
              "type": "string"
            },
            "error": {
              "type": "string"
            }
          },
          "required": [
            "tool_name",
            "error",
            "tool_call_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "tool_loop_start",
          "description": "Event type: tool_loop_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_description": {
              "type": "string"
            },
            "max_turns": {
              "type": "integer"
            },
            "tool_count": {
              "type": "integer"
            }
          },
          "required": [
            "max_turns",
            "task_description",
            "tool_count"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "tool_loop_turn",
          "description": "Event type: tool_loop_turn"
        },
        "data": {
          "type": "object",
          "properties": {
            "turn": {
              "type": "integer"
            },
            "tool_calls_count": {
              "type": "integer"
            }
          },
          "required": [
            "tool_calls_count",
            "turn"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "tool_loop_complete",
          "description": "Event type: tool_loop_complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "turns_used": {
              "type": "integer"
            },
            "tool_calls_total": {
              "type": "integer"
            },
            "final_response": {
              "type": "string"
            }
          },
          "required": [
            "tool_calls_total",
            "turns_used"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "tool_repair",
          "description": "Event type: tool_repair"
        },
        "data": {
          "type": "object",
          "properties": {
            "tool_name": {
              "type": "string"
            },
            "tool_call_id": {
              "type": "string"
            },
            "repairs": {
              "type": "array",
              "items": {}
            },
            "repair_count": {
              "type": "integer"
            }
          },
          "required": [
            "tool_name",
            "repairs",
            "tool_call_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "tool_blocked",
          "description": "Event type: tool_blocked"
        },
        "data": {
          "type": "object",
          "properties": {
            "tool_name": {
              "type": "string"
            },
            "tool_call_id": {
              "type": "string"
            },
            "reason": {
              "type": "string"
            }
          },
          "required": [
            "tool_name",
            "reason",
            "tool_call_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "tool_retry",
          "description": "Event type: tool_retry"
        },
        "data": {
          "type": "object",
          "properties": {
            "tool_name": {
              "type": "string"
            },
            "tool_call_id": {
              "type": "string"
            },
            "attempt": {
              "type": "integer"
            },
            "strategy": {
              "type": "string"
            },
            "error": {
              "type": "string"
            }
          },
          "required": [
            "attempt",
            "error",
            "strategy",
            "tool_name",
            "tool_call_id"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "tool_escalate",
          "description": "Event type: tool_escalate"
        },
        "data": {
          "type": "object",
          "properties": {
            "tool_name": {
              "type": "string"
            },
            "error": {
              "type": "string"
            },
            "reason": {
              "type": "string"
            },
            "attempts": {
              "type": "integer"
            }
          },
          "required": [
            "reason",
            "tool_name",
            "error"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "reliability_warning",
          "description": "Event type: reliability_warning"
        },
        "data": {
          "type": "object",
          "properties": {
            "warning": {
              "type": "string"
            },
            "context": {
              "type": "string"
            }
          },
          "required": [
            "warning"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "reliability_hallucination",
          "description": "Event type: reliability_hallucination"
        },
        "data": {
          "type": "object",
          "properties": {
            "detected_pattern": {
              "type": "string"
            },
            "evidence": {
              "type": "string"
            },
            "severity": {
              "type": "string"
            }
          },
          "required": [
            "detected_pattern"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "tool_pattern_learned",
          "description": "Event type: tool_pattern_learned"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_type": {
              "type": "string"
            },
            "tool_sequence": {
              "type": "array",
              "items": {}
            },
            "success_rate": {
              "type": "number"
            }
          },
          "required": [
            "task_type",
            "success_rate",
            "tool_sequence"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "progressive_unlock",
          "description": "Event type: progressive_unlock"
        },
        "data": {
          "type": "object",
          "properties": {
            "category": {
              "type": "string"
            },
            "tools_unlocked": {
              "type": "array",
              "items": {}
            },
            "turn": {
              "type": "integer"
            },
            "validation_passes": {
              "type": "integer"
            }
          },
          "required": [
            "category",
            "turn",
            "validation_passes",
            "tools_unlocked"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "convergence_start",
          "description": "Event type: convergence_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "files": {
              "type": "array",
              "items": {}
            },
            "gates": {
              "type": "array",
              "items": {}
            },
            "max_iterations": {
              "type": "integer"
            }
          },
          "required": [
            "files",
            "max_iterations",
            "gates"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "convergence_iteration_start",
          "description": "Event type: convergence_iteration_start"
        },
        "data": {
          "type": "object",
          "properties": {
            "iteration": {
              "type": "integer"
            },
            "files": {
              "type": "array",
              "items": {}
            }
          },
          "required": [
            "files",
            "iteration"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "convergence_iteration_complete",
          "description": "Event type: convergence_iteration_complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "iteration": {
              "type": "integer"
            },
            "all_passed": {
              "type": "boolean"
            },
            "total_errors": {
              "type": "integer"
            },
            "gate_results": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "required": [
            "gate_results",
            "iteration",
            "all_passed",
            "total_errors"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "convergence_fixing",
          "description": "Event type: convergence_fixing"
        },
        "data": {
          "type": "object",
          "properties": {
            "iteration": {
              "type": "integer"
            },
            "error_count": {
              "type": "integer"
            }
          },
          "required": [
            "error_count",
            "iteration"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "convergence_stable",
          "description": "Event type: convergence_stable"
        },
        "data": {
          "type": "object",
          "properties": {
            "iterations": {
              "type": "integer"
            },
            "duration_ms": {
              "type": "integer"
            }
          },
          "required": [
            "duration_ms",
            "iterations"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "convergence_timeout",
          "description": "Event type: convergence_timeout"
        },
        "data": {
          "type": "object",
          "properties": {
            "iterations": {
              "type": "integer"
            }
          },
          "required": [
            "iterations"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "convergence_stuck",
          "description": "Event type: convergence_stuck"
        },
        "data": {
          "type": "object",
          "properties": {
            "iterations": {
              "type": "integer"
            },
            "repeated_errors": {
              "type": "array",
              "items": {}
            }
          },
          "required": [
            "repeated_errors",
            "iterations"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "convergence_max_iterations",
          "description": "Event type: convergence_max_iterations"
        },
        "data": {
          "type": "object",
          "properties": {
            "iterations": {
              "type": "integer"
            }
          },
          "required": [
            "iterations"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "convergence_budget_exceeded",
          "description": "Event type: convergence_budget_exceeded"
        },
        "data": {
          "type": "object",
          "properties": {
            "tokens_used": {
              "type": "integer"
            },
            "max_tokens": {
              "type": "integer"
            }
          },
          "required": [
            "max_tokens",
            "tokens_used"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "delegation_started",
          "description": "Event type: delegation_started"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_description": {
              "type": "string"
            },
            "smart_model": {
              "type": "string"
            },
            "delegation_model": {
              "type": "string"
            },
            "reason": {
              "type": "string"
            },
            "estimated_tokens": {
              "type": "integer"
            }
          },
          "required": [
            "task_description",
            "delegation_model",
            "smart_model",
            "reason"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "ephemeral_lens_created",
          "description": "Event type: ephemeral_lens_created"
        },
        "data": {
          "type": "object",
          "properties": {
            "task_scope": {
              "type": "string"
            },
            "heuristics_count": {
              "type": "integer"
            },
            "patterns_count": {
              "type": "integer"
            },
            "generated_by": {
              "type": "string"
            },
            "anti_patterns_count": {
              "type": "integer"
            },
            "constraints_count": {
              "type": "integer"
            }
          },
          "required": [
            "generated_by",
            "task_scope",
            "heuristics_count",
            "patterns_count"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "intent_classified",
          "description": "Event type: intent_classified"
        },
        "data": {
          "type": "object",
          "properties": {
            "path": {
              "type": "array",
              "items": {}
            },
            "path_formatted": {
              "type": "string"
            },
            "confidence": {
              "type": "number"
            },
            "reasoning": {
              "type": "string"
            },
            "requires_approval": {
              "type": "boolean"
            },
            "tool_scope": {
              "type": "string"
            },
            "depth": {
              "type": "integer"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "node_transition",
          "description": "Event type: node_transition"
        },
        "data": {
          "type": "object",
          "properties": {
            "from_node": {
              "type": "string"
            },
            "to_node": {
              "type": "string"
            },
            "path": {
              "type": "array",
              "items": {}
            },
            "path_formatted": {
              "type": "string"
            },
            "reason": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "domain_detected",
          "description": "Event type: domain_detected"
        },
        "data": {
          "type": "object",
          "properties": {
            "domain_type": {
              "type": "string"
            },
            "confidence": {
              "type": "number"
            },
            "tools_package": {
              "type": "string"
            },
            "validators": {
              "type": "array",
              "items": {}
            }
          },
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "specialist_spawned",
          "description": "Event type: specialist_spawned"
        },
        "data": {
          "type": "object",
          "properties": {
            "specialist_id": {
              "type": "string"
            },
            "task_id": {
              "type": "string"
            },
            "parent_id": {
              "type": "string"
            },
            "role": {
              "type": "string"
            },
            "focus": {
              "type": "string"
            },
            "budget_tokens": {
              "type": "integer"
            }
          },
          "required": [
            "role",
            "parent_id",
            "task_id",
            "specialist_id",
            "focus"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "specialist_completed",
          "description": "Event type: specialist_completed"
        },
        "data": {
          "type": "object",
          "properties": {
            "specialist_id": {
              "type": "string"
            },
            "success": {
              "type": "boolean"
            },
            "summary": {
              "type": "string"
            },
            "tokens_used": {
              "type": "integer"
            },
            "duration_seconds": {
              "type": "number"
            }
          },
          "required": [
            "success",
            "specialist_id",
            "summary",
            "tokens_used"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "checkpoint_found",
          "description": "Event type: checkpoint_found"
        },
        "data": {
          "type": "object",
          "properties": {
            "phase": {
              "type": "string"
            },
            "checkpoint_at": {
              "type": "string"
            },
            "goal": {
              "type": "string"
            }
          },
          "required": [
            "phase",
            "checkpoint_at",
            "goal"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "checkpoint_saved",
          "description": "Event type: checkpoint_saved"
        },
        "data": {
          "type": "object",
          "properties": {
            "phase": {
              "type": "string"
            },
            "summary": {
              "type": "string"
            },
            "tasks_completed": {
              "type": "integer"
            }
          },
          "required": [
            "summary",
            "phase"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "phase_complete",
          "description": "Event type: phase_complete"
        },
        "data": {
          "type": "object",
          "properties": {
            "phase": {
              "type": "string"
            },
            "duration_seconds": {
              "type": "number"
            }
          },
          "required": [
            "duration_seconds",
            "phase"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "autonomous_action_blocked",
          "description": "Event type: autonomous_action_blocked"
        },
        "data": {
          "type": "object",
          "properties": {
            "action_type": {
              "type": "string"
            },
            "path": {
              "type": "string"
            },
            "reason": {
              "type": "string"
            },
            "blocking_rule": {
              "type": "string"
            },
            "risk_level": {
              "type": "string"
            }
          },
          "required": [
            "action_type",
            "reason",
            "blocking_rule",
            "risk_level"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "guard_evolution_suggested",
          "description": "Event type: guard_evolution_suggested"
        },
        "data": {
          "type": "object",
          "properties": {
            "guard_id": {
              "type": "string"
            },
            "evolution_type": {
              "type": "string"
            },
            "reason": {
              "type": "string"
            },
            "confidence": {
              "type": "number"
            }
          },
          "required": [
            "guard_id",
            "confidence",
            "reason",
            "evolution_type"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "circuit_breaker_open",
          "description": "Event type: circuit_breaker_open"
        },
        "data": {
          "type": "object",
          "properties": {
            "state": {
              "type": "string"
            },
            "consecutive_failures": {
              "type": "integer"
            },
            "failure_threshold": {
              "type": "integer"
            }
          },
          "required": [
            "consecutive_failures",
            "state",
            "failure_threshold"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "budget_exhausted",
          "description": "Event type: budget_exhausted"
        },
        "data": {
          "type": "object",
          "properties": {
            "spent": {
              "type": "integer"
            },
            "budget": {
              "type": "integer"
            },
            "percentage_used": {
              "type": "number"
            }
          },
          "required": [
            "budget",
            "spent"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "budget_warning",
          "description": "Event type: budget_warning"
        },
        "data": {
          "type": "object",
          "properties": {
            "remaining": {
              "type": "integer"
            },
            "percentage_remaining": {
              "type": "number"
            }
          },
          "required": [
            "remaining"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "health_check_failed",
          "description": "Event type: health_check_failed"
        },
        "data": {
          "type": "object",
          "properties": {
            "errors": {
              "type": "array",
              "items": {}
            },
            "error_count": {
              "type": "integer"
            }
          },
          "required": [
            "errors"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "health_warning",
          "description": "Event type: health_warning"
        },
        "data": {
          "type": "object",
          "properties": {
            "warnings": {
              "type": "array",
              "items": {}
            },
            "warning_count": {
              "type": "integer"
            }
          },
          "required": [
            "warnings"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "timeout",
          "description": "Event type: timeout"
        },
        "data": {
          "type": "object",
          "properties": {
            "operation": {
              "type": "string"
            },
            "timeout_seconds": {
              "type": "number"
            },
            "elapsed_seconds": {
              "type": "number"
            }
          },
          "required": [
            "operation"
          ],
          "additionalProperties": true
        },
        "timestamp": {
          "type": "number",
          "description": "Unix timestamp (seconds since epoch)"
        }
      },
      "required": [
        "type",
        "data",
        "timestamp"
      ]
    }
  ]
}